function filter_JDX_data(t){molecule_ir_data=new Array;for(var e=t.split("\n"),a=0;a<e.length-1;a++)if(void 0!==typeof e[a]&&""!==e[a]){var r=e[a].charAt(0);if(r%1==0){var n=e[a].split(" ");molecule_ir_data.push({frequency:n[0],value:n[1]})}else{var l=document.getElementById("data-comments"),o=document.createElement("p");o.innerHTML="#"==r?e[a].substring(2):e[a],l.appendChild(o)}}chart_this(molecule_ir_data)}function chart_this(t){var e=Array.prototype.slice.call(t),a=document.getElementById("canvas-wrapper");e.forEach(function(t){t.frequency=t.frequency,t.value=t.value});var r={top:20,right:30,bottom:30,left:40},n=a.offsetWidth-r.left-r.right,l=a.offsetHeight-r.top-r.bottom,o=d3.scaleLinear().rangeRound([n,0]),s=d3.scaleLinear().rangeRound([l,0]),c=d3.area().x(function(t){return o(t.frequency)}).y1(function(t){return s(t.value)}),i=d3.select("body #canvas-wrapper").append("svg").attr("class","area-chart").datum(e).attr("width",n+r.left+r.right).attr("height",l+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")");o.domain([e[0].frequency,e[e.length-1].frequency]),s.domain([0,d3.max(e,function(t){return t.value})]),c.y0(s(0)),i.append("linearGradient").attr("id","temperature-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("y1",s(0)).attr("x2",n).attr("y2",s(1)).selectAll("stop").data([{offset:"0%",color:"steelblue"},{offset:"50%",color:"gray"},{offset:"100%",color:"red"}]).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),i.append("path").data([e]).attr("class","area").attr("d",c),i.append("g").attr("class","grid").attr("transform","translate(0,"+l+")").call(function(){return d3.axisBottom(o).ticks(5)}().tickSize(-l).tickFormat("")),i.append("g").attr("transform","translate(0,"+l+")").call(d3.axisBottom(o)).attr("class","axisWhite").append("text").attr("transform","translate("+(n-60)+", -10)").attr("class","legend").text("Wavelength"),i.append("g").call(d3.axisLeft(s)).attr("class","axisWhite").append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").attr("class","legend").text("Transmitance")}var dropdowns=Array.prototype.slice.call(document.getElementsByClassName("dropdown-button"));dropdowns.forEach(function(t){var e=Array.prototype.slice.call(document.getElementsByClassName("link"));t.addEventListener("click",function(t){t.preventDefault(),this.parentElement.classList.toggle("active")},!1),e.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),this.parentElement.parentElement.parentElement.parentElement.classList.toggle("active")})})});var molecule_ir_data=new Array,molecule_select=document.getElementById("molecule-select");get_JDX_data=function(t,e,a){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?e&&e(r.responseText):a&&a(r))},r.open("GET",t,!0),r.send()};var molecules_entry=Array.prototype.slice.call(molecule_select.getElementsByClassName("link"));molecules_entry.forEach(function(t){t.addEventListener("click",function(t){var e=this.getAttribute("data-file");document.getElementById("canvas-wrapper").innerHTML="",document.getElementById("data-comments").innerHTML="",get_JDX_data(e,filter_JDX_data)},!1)}),get_JDX_data("data/111-65-9-IR.jdx",filter_JDX_data);